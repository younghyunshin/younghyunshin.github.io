---
layout: post
title: "ACM-ICPC 2019 Problem C : Byte Coin"
tags: [알고리즘, 대회, ACM-ICPC]
comments: true
---

> ACM-ICPC 2019 Aisa Seoul National First Round  

### 문제설명  
바이트코인은 비트코인과달리 가격의 등락을 미리 정확히 예측할 수 있다.  

1일부터 n일까지 n일 동안 바이트 코인의 등락을 미리 알 수 있으며 우리에게는 초기 현금 W가 주어져 있다. 매일 바이트 코인을 매수하거나 매도할 수 있다고 하자. 다만 바이트 코인 하나를 나누어 매도하거나 매수할 수는 없다. 우리는 n일 날 보유하고 있는 모든 코인을 매도할 때 가지고 있는 현금을 최대화하고 싶다.  

예를 들어 바이트 코인의 가격이 n일까지 다음과 같이 주어졌고 초기 현금은 24라고 하자.  
![Center example image](https://user-images.githubusercontent.com/35067611/66264407-c4920b80-e83f-11e9-8282-f3af97f398c2.png "Center"){: .center-image}  

수익을 최대한 높이려면 다음과 같이 바이트 코인을 매수, 매도할 수 있다.  
1. 첫 날 현금 20을 써서 4개의 코인을 산다. 둘째 날 모든 코인을 매도해서 현금 28을 얻고 모두 32의 현금을 갖게 된다.  
2. 5일째 되는 날 현금 32를 써서 16개의 코인을 매수한다.  
3. 7일째 되는 날 모든 코인을 매도해서 모두 128의 현금을 갖게 된다.  
4. 9일째 되는 날 현금 126을 써서 42개의 코인을 사고 10일 날 모든 코인을 매도한다.  

그러면 10일 날 현금이 170이 되고 이것이 최대이다.  

요일 수 n, 초기 현금 W, 1일부터 n일까지 각 요일의 바이트 코인 가격이 주어질 때, n일 날 보유하고 있는 모든 코인을 매도할 때 보유하게 될 최종 현금의 최댓값ㅇ르 출력하는 프로그램을 작성하시오.  

입력  
입력은 표준입력을 사용한다. 첫 번째 줄에 요일 수를 나타내는 양의 정수 n과 초기 현금 W(1 ≤ n ≤ 15, 1 ≤ W ≤ 100,000)가 주어진다. 다음 n 개의 줄에서, i번째 줄은 i일의 바이트 코인 가격을 나타내는 정수 si가 주어진다(1 ≤ si ≤ 50).  

출력  
출력은 표준출력을 사용한다. n일 날 보유하고 있는 모든 코인을 매도할 때 가지고 있는 현금의 최댓값을 한 행에 출력한다. 비록 초기 현금 W는 그렇게 크지 않지만 최종 현금은 매우 커질 수 있음에 주의하자.  

### 접근  
이 문제는 Greedy 혹은 DP를 쓸 것 같지만 개인적으로 문제를 풀 때는 그냥 그래프를 분석해서 사야할 때와 팔아야할 때를 구분하고 그걸 구현하는 정도의 난이도로 생각되었다.  

여기서 포인트는 첫째, 마지막 날에는 결국 갖고 있는 모든 코인을 매도해야 한다는 것이고 둘째, 꼭 사거나 파는 행위를 매일 해야하는건 아니라는 것이다. 즉, 어떤 날은 매수도 매도도 하지 않는 날도 있는 것이다.  

이렇게 매도하는 날, 매수하는 날, 아무것도 하지 않는 날로 구분지어 생각해보면 다음과 같은 결론이 난다.  
1. 오늘보다 내일이 가격이 비싸면 코인을 돈을 모두 써서 코인을 산다.  
2. 오늘보다 내일이 가격이 싸면 코인을 모두 처분한다.  

1, 2번에 대해 각각 if문 처리를 해주고 매수도 매도도 하지 않는 날에 대해서는 아무것도 하지 않으니 구현할 필요도 없다.  

그런데 ICPC 대회 당시에는 한번에 CORRECT를 받았는데 백준에 문제가 올라와서 백준에 제출했더니 틀렸습니다가 떴다. 열심히 디버깅을 해본 결과 오늘과 내일의 가격이 같은 경우는 고려할 필요가 딱히 없었고 코인 갯수를 담는 변수를 lld가 아니라 int로 해놓은게 문제였다. 돈뿐 아니라 코인도 계속해서 매수하다보면 수가 굉장히 커질 수 있다는 것을 간과했다.  

### 코드  
~~~c++  

#include <cstdio>

using namespace std;

long long money, coins;

void buy(int price) {
    coins += money/price;
    money %= price;
}

void sell(int price) {
    money += coins*price;
    coins -= coins;
}

int main() {

    int n, i;
    long long w;
    
    scanf("%d %lld", &n, &w);

    int arr[n+1];

    money = w;
    coins = 0;

    for (i = 0; i < n; i++) scanf("%d", &arr[i]);
    arr[n] = 0;

    for (i = 0; i < n; i++) {
        if (arr[i] < arr[i+1]) buy(arr[i]);
        else if (arr[i] > arr[i+1]) sell(arr[i]);
    }
    
    printf("%lld\n", money);
    return 0;
}
~~~